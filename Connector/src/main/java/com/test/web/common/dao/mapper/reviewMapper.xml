<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test.web.common.dao.reviewDAO">
    <sql id="reviewColumns">
        review_no AS reviewNo, 
        customer_id AS customerId,
	    study_id AS studyId, 
	    review_content AS reviewContent,
	    review_rating AS reviewRating, 
	    review_regdate AS reviewRegdate
    </sql>
    
    <!-- 회원정보 1건 조회 -->
	<select id="selectReview" resultType="reviewBean" parameterType="reviewBean">
	    SELECT
	    	<include refid="reviewColumns"/>
	    FROM
	    	review
	    WHERE
  			customer_id = #{customerId} 
	</select>

	<insert id="insertReview" parameterType="reviewBean">
	    INSERT INTO review
 		( 
 			customer_id, 
 			study_id, 
 			review_content,
 			review_rating
 		)
		VALUES
 		(
 			#{customerId}, 
 			#{studyId}, 
 			#{reviewContent},
 			#{reviewRating}
 		)
 		
	</insert>
	
	<update id="updateReview" parameterType="ReviewBean">
		UPDATE review SET
 			review_content = #{reviewContent},
 			review_rating = #{reviewRating}
		WHERE
			customer_id = #{customerId}
	</update>
	
	<delete id="deleteReview" parameterType="ReviewBean">
	    DELETE FROM 
	    	review
	    WHERE
	    	customer_id = #{customerId} and
	    	study_id = #{studyId}
	</delete>
    

</mapper>